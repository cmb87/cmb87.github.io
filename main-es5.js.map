{"version":3,"sources":["webpack:///src/app/services/objecthandler.service.ts","webpack:///src/environments/environment.ts","webpack:///src/app/app.component.ts","webpack:///src/app/app.component.html","webpack:///src/app/services/draw-measurement.service.ts","webpack:///src/app/app.module.ts","webpack:///src/app/services/draw-line.service.ts","webpack:///src/app/components/polygon-drawer/polygon-drawer.component.ts","webpack:///src/app/components/polygon-drawer/polygon-drawer.component.html","webpack:///src/app/services/draw-polygon.service.ts","webpack:///src/app/app-routing.module.ts","webpack:///src/main.ts","webpack:///$_lazy_route_resource lazy namespace object"],"names":["ObjecthandlerService","ctx","type","objs","ax","ay","activeIdx","push","length","forEach","polygon","index","setScaleFactors","update","pop","add","providedIn","CanvasRenderingContext2D","environment","production","AppComponent","title","selector","templateUrl","styleUrls","DrawMeasurementService","color","direction","name","principalLength","principalAxis","principalAxisSet","scaleFactor","_settings","JSON","parse","localStorage","getItem","axis","selectionDone","draw","e","x","y","val","_store2session","ds","Math","abs","console","log","strokeStyle","lineWidth","setLineDash","beginPath","moveTo","fillRect","i","lineTo","stroke","setItem","stringify","AppModule","declarations","imports","providers","bootstrap","LineService","points","pointsReal","done","initialized","pointSize","r","floor","random","g","b","fillStyle","mean","_calcMean","font","fillText","toFixed","_calcLineInRealUnit","_calcLineLength","l","total","dx","dy","sqrt","pow","npts","point","PolygonDrawerComponent","image","Image","imagePath","height","width","selectionMode","canvas","nativeElement","getContext","polygonDrawer","lineDrawer","principalx","principaly","setPrincipalLength","updateScaleFactors","_reloadImage","event","preventDefault","obj","getCurrentActive","parseInt","offsetX","offsetY","addPoint","line","onload","drawImage","src","reset","remove","onLengthChange","onLeftClick","onRightClick","PolygonService","area","colorFill","closePath","fill","_calcPolygonInRealUnit","_calcPolygonArea","addX","addY","subX","subY","routes","AppRoutingModule","forRoot","exports","bootstrapModule","err","error","webpackEmptyAsyncContext","req","Promise","resolve","then","Error","code","keys","module","id"],"mappings":"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","file":"main-es5.js","sourcesContent":["import { Injectable } from '@angular/core';\nimport { LineService } from './draw-line.service';\nimport { PolygonService } from './draw-polygon.service';\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class ObjecthandlerService {\n\n  public objs = [];\n  private activeIdx: number;\n\n  public ax: number = 1.0;\n  public ay: number = 1.0;\n\n  // ---------------------------------\n  constructor(private ctx: CanvasRenderingContext2D, private type: string=\"line\"){\n    this.activeIdx=0;\n\n    switch(this.type) {\n      case \"polygon\":\n        this.objs.push(new PolygonService(this.ctx, this.ax, this.ay));\n        break;\n      case \"line\":\n        this.objs.push(new LineService(this.ctx, this.ax, this.ay));\n        break;\n    }\n\n  }\n  // ---------------------------------\n  add() {\n    this.activeIdx +=1;\n\n    switch(this.type) {\n      case \"polygon\":\n        this.objs.push(new PolygonService(this.ctx, this.ax, this.ay));\n        break;\n      case \"line\":\n        this.objs.push(new LineService(this.ctx, this.ax, this.ay));\n        break;\n    }\n  }\n  // ---------------------------------\n  available(){\n    if (this.objs.length > 0) {\n      return true;\n    }\n    return false;\n  }\n  // ---------------------------------\n  updateScaleFactors(ax: number, ay: number) {\n    this.ax = ax;\n    this.ay = ay;\n    this.objs.forEach(function (polygon, index) {\n      polygon.setScaleFactors(ax, ay);\n      polygon.update();\n    });\n  }\n  // ---------------------------------\n  remove() {\n    if (this.objs.length > 0) {\n      this.objs.pop();\n      this.activeIdx -=1;\n    }\n\n    // To avoid an empty list\n    if (this.objs.length == 0) this.add();\n\n  }\n  // ---------------------------------\n  getCurrentActive() {\n    return this.objs[this.activeIdx]\n  }\n\n}\n  \n  ","// This file can be replaced during build by using the `fileReplacements` array.\n// `ng build --prod` replaces `environment.ts` with `environment.prod.ts`.\n// The list of file replacements can be found in `angular.json`.\n\nexport const environment = {\n  production: false\n};\n\n/*\n * For easier debugging in development mode, you can import the following file\n * to ignore zone related error stack frames such as `zone.run`, `zoneDelegate.invokeTask`.\n *\n * This import should be commented out in production mode because it will have a negative impact\n * on performance if an error is thrown.\n */\n// import 'zone.js/dist/zone-error';  // Included with Angular CLI.\n","import { Component } from '@angular/core';\n\n@Component({\n  selector: 'app-root',\n  templateUrl: './app.component.html',\n  styleUrls: ['./app.component.css']\n})\nexport class AppComponent {\n  title = 'smartArchitecture';\n}\n","<nav class=\"navbar navbar-expand-lg navbar-light bg-light\">\n<a class=\"navbar-brand\" href=\"#\">SmartArchitecture</a>\n<button class=\"navbar-toggler\" type=\"button\" data-toggle=\"collapse\" data-target=\"#navbarNavAltMarkup\" aria-controls=\"navbarNavAltMarkup\" aria-expanded=\"false\" aria-label=\"Toggle navigation\">\n    <span class=\"navbar-toggler-icon\"></span>\n</button>\n<div class=\"collapse navbar-collapse\" id=\"navbarNavAltMarkup\">\n    <div class=\"navbar-nav\">\n    <!-- <a class=\"nav-item nav-link active\" href=\"#\">Home <span class=\"sr-only\">(current)</span></a>\n    <a class=\"nav-item nav-link\" href=\"#\">Features</a> -->\n    </div>\n</div>\n</nav>\n<div class=\"container\">\n    \n\n    <nav>\n        <div class=\"nav nav-tabs\" id=\"nav-tab\" role=\"tablist\">\n          <a class=\"nav-item nav-link active\" id=\"nav-home-tab\" data-toggle=\"tab\" href=\"#nav-home\" role=\"tab\" aria-controls=\"nav-home\" aria-selected=\"true\">Basement</a>\n          <a class=\"nav-item nav-link\" id=\"nav-profile-tab\" data-toggle=\"tab\" href=\"#nav-profile\" role=\"tab\" aria-controls=\"nav-profile\" aria-selected=\"false\">First Floor</a>\n        </div>\n      </nav>\n      <div class=\"tab-content\" id=\"nav-tabContent\">\n        <div class=\"tab-pane fade show active\" id=\"nav-home\" role=\"tabpanel\" aria-labelledby=\"nav-home-tab\">\n            <app-polygon-drawer name=\"Basement\" imagePath=\"../assets/basement.jpg\"></app-polygon-drawer>\n        </div>\n        <div class=\"tab-pane fade\" id=\"nav-profile\" role=\"tabpanel\" aria-labelledby=\"nav-profile-tab\">\n            <app-polygon-drawer name=\"FirstFloor\" imagePath=\"../assets/first.jpg\"></app-polygon-drawer>\n        </div>\n      </div>\n\n</div>","import { Injectable } from '@angular/core';\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class DrawMeasurementService {\n\n  private principalLength = 1.0;\n  private principalAxis = [];\n  private principalAxisSet = false;\n  public scaleFactor = 1.0;\n\n  constructor(\n    private ctx: CanvasRenderingContext2D, private color: string=\"#7CFC00\", \n    private direction: string=\"x\", private name: string=\"principal\") {\n\n    try {\n      var _settings = JSON.parse(localStorage.getItem('principal_'+this.name+\"_\"+this.direction));\n      this.principalAxisSet = _settings.principalAxisSet;\n      this.principalAxis = _settings.axis;\n      this.selectionDone();\n      this.draw();\n    } catch(e) {};\n\n  }\n  // -----------------------------\n  addPoint( x: number, y: number) {\n    if (this.principalAxisSet) {\n      return;\n    }\n    if (this.principalAxis.length<2) this.principalAxis.push([x,y]);\n    if (this.principalAxis.length==2) this.selectionDone();\n  }\n\n  // -----------------------------\n  setPrincipalLength(val: number){\n    this.principalLength = val;\n  }\n\n  // -----------------------------\n  reset() {\n    this.principalAxis = [];\n    this.principalLength = 1.0;\n    this.principalAxisSet = false;\n    this.scaleFactor = 1.0;\n    this._store2session();\n  }\n  // -----------------------------\n  selectionDone() {\n    if (this.principalAxis.length==2) {\n      var ds = 1.0;\n      switch(this.direction) {\n        case \"x\":\n          this.principalAxis[1][1] = this.principalAxis[0][1];\n          ds = Math.abs(this.principalAxis[1][0] - this.principalAxis[0][0]);\n          break;\n        case \"y\":\n          this.principalAxis[1][0] = this.principalAxis[0][0];\n          ds = Math.abs(this.principalAxis[1][1] - this.principalAxis[0][1]);\n          break\n      };\n  \n      // Calculate scale factor [m/pixels]\n      this.scaleFactor = this.principalLength/ds;\n      this.principalAxisSet = true;\n      this._store2session();\n      console.log(\"Principal axis set!\")\n    }\n  }\n\n  // -----------------------------\n  draw(){\n\n    if (this.principalAxis.length>0) {\n     \n\n      this.ctx.strokeStyle = this.color;\n      this.ctx.lineWidth = 3;\n      this.ctx.setLineDash([]);\n      this.ctx.beginPath();\n\n      this.ctx.moveTo(this.principalAxis[0][0], this.principalAxis[0][1]);\n      this.ctx.fillRect(this.principalAxis[0][0] , this.principalAxis[0][1], 1, 1);\n\n      for ( var i=1 ; i < this.principalAxis.length ; i+=1 ){\n        this.ctx.lineTo(this.principalAxis[i][0], this.principalAxis[i][1]);\n        this.ctx.fillRect(this.principalAxis[i][0] , this.principalAxis[i][1], 1, 1);\n      }\n      this.ctx.stroke(); \n    } \n  } \n  // -----------------------------\n  private _store2session(){\n    // Store axis to session\n    var _settings = {\n      axis: this.principalAxis,\n      principalAxisSet: true,\n    }\n    localStorage.setItem('principal_'+this.name+\"_\"+this.direction, JSON.stringify(_settings)); \n  }\n}\n","import { BrowserModule } from '@angular/platform-browser';\nimport { NgModule } from '@angular/core';\nimport { FormsModule } from '@angular/forms';\nimport { NgbModule } from '@ng-bootstrap/ng-bootstrap';\n\nimport { AppRoutingModule } from './app-routing.module';\nimport { AppComponent } from './app.component';\nimport { PolygonDrawerComponent } from './components/polygon-drawer/polygon-drawer.component';\n\n@NgModule({\n  declarations: [\n    AppComponent,\n    PolygonDrawerComponent\n  ],\n  imports: [\n    BrowserModule,\n    AppRoutingModule,\n    NgbModule,\n    FormsModule\n  ],\n  providers: [],\n  bootstrap: [AppComponent]\n})\nexport class AppModule { }\n","import { Injectable } from '@angular/core';\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class LineService {\n\n  public points = [];\n  public pointsReal = [];\n\n  private done: Boolean=false;\n  private initialized: Boolean = false;\n  private pointSize: number = 5;\n  private color: string;\n  public length: number = 0.0;\n  \n  constructor(private ctx: CanvasRenderingContext2D, private ax: number=1.0, private ay:number=1.0){\n    var r =  Math.floor(Math.random() * 255);\n    var g =  Math.floor(Math.random() * 255);\n    var b =  Math.floor(Math.random() * 255);\n    this.color = \"rgb(\"+r+\" ,\"+g+\", \"+b+\")\";\n  }\n\n  addPoint( x: number, y: number) {\n    this.points.push([x,y]);\n    this.initialized = true;\n  }\n  // -----------------------------\n  draw(){\n\n    if (this.initialized) {\n\n      this.ctx.strokeStyle = this.color;\n      this.ctx.fillStyle = this.color;\n      this.ctx.setLineDash([]);\n      this.ctx.lineWidth = 5;\n      this.ctx.beginPath();\n\n      this.ctx.moveTo(this.points[0][0], this.points[0][1]);\n      this.ctx.fillRect(this.points[0][0] , this.points[0][1], this.pointSize, this.pointSize);\n\n      for ( var i=1 ; i < this.points.length ; i+=1 ){\n        this.ctx.lineTo( this.points[i][0] , this.points[i][1] )\n        this.ctx.fillRect(this.points[i][0] , this.points[i][1], this.pointSize, this.pointSize);\n      }\n\n      if (this.done) {\n        var mean = this._calcMean();\n        this.ctx.fillStyle = \"rgb(0,0,0)\";\n        this.ctx.font = \"20px Arial\";\n        this.ctx.fillText(this.length.toFixed(2)+\"m\", mean[0], mean[1]); \n      }\n      this.ctx.stroke(); \n    } \n\n  } \n  // -----------------------------\n  selectionDone(){\n    this.done = true;\n    this.update();\n  }\n  // -----------------------------\n  reset(){\n    this.initialized = false;\n    this.points = [];\n  }\n  // -----------------------------\n  getVertices(){\n    return this.pointsReal;\n  }\n\n  // -----------------------------\n  setScaleFactors(ax: number, ay:number) {\n    this.ax = ax;\n    this.ay = ay;\n    console.log(ax, ay);\n  }\n  // -----------------------------\n  update() {\n    if (this.done) {\n      this._calcLineInRealUnit();\n      this.length = this._calcLineLength();\n    }\n  }\n  // -----------------------------\n  private _calcLineInRealUnit() {\n    this.pointsReal = [];\n    for (var i = 0, l = this.points.length; i < l; i++) {\n      this.pointsReal.push([this.points[i][0]*this.ax, this.points[i][1]*this.ay])\n    }\n  };\n  // -----------------------------\n  private _calcLineLength() {\n    var total = 0;\n\n    for (var i = 0, l = this.pointsReal.length; i < l-1; i++) {\n      var dx = this.pointsReal[i+1][0]-this.pointsReal[i][0];\n      var dy = this.pointsReal[i+1][1]-this.pointsReal[i][1];\n      var ds = Math.sqrt(Math.pow(dx,2) + Math.pow(dy,2));\n      total += ds;\n    }\n    return total;\n  }\n  // -----------------------------\n  private _calcMean() {\n    var mean = [0.0, 0.0]\n    var npts = this.points.length;\n    this.points.forEach(function (point, index) {\n      mean[0] += point[0]/npts;\n      mean[1] += point[1]/npts;\n    });\n\n    return mean;\n  }\n  // -----------------------------\n\n}","import { Component, OnInit, ViewChild, ElementRef, Input } from '@angular/core';\nimport { ObjecthandlerService } from '../../services/objecthandler.service';\nimport { DrawMeasurementService } from '../../services/draw-measurement.service';\n\n\n@Component({\n  selector: 'app-polygon-drawer',\n  templateUrl: './polygon-drawer.component.html',\n  styleUrls: ['./polygon-drawer.component.css']\n})\nexport class PolygonDrawerComponent implements OnInit {\n\n  private polygonDrawer;\n  private lineDrawer;\n  private principalx;\n  private principaly;\n\n  @ViewChild('canvas', {static: true})\n  private canvas: ElementRef<HTMLCanvasElement>;\n  private ctx: CanvasRenderingContext2D;\n\n  private image = new Image();\n\n  @Input()\n  public name: string = \"basement\";\n\n  @Input()\n  public imagePath: string = \"../assets/basement.jpg\";\n\n  public height: number = 1200;\n  public width: number = 800;\n\n  dx: number = 1.0;\n  dy: number = 1.0;\n\n  selectionMode: string = \"principalx\";\n\n  // ---------------------------------\n  constructor() {}\n\n  // ---------------------------------\n  ngOnInit() {\n\n    // Canvas Polygon and Image\n    this.ctx = this.canvas.nativeElement.getContext('2d');\n    this.polygonDrawer = new ObjecthandlerService(this.ctx, \"polygon\");\n    this.lineDrawer = new ObjecthandlerService(this.ctx, \"line\");\n\n    // Principal Axis\n    this.principalx = new DrawMeasurementService(this.ctx, \"#7CFC00\", \"x\", this.name);\n    this.principaly = new DrawMeasurementService(this.ctx, \"#FF0000\", \"y\", this.name);\n\n    try {\n      var _settings = JSON.parse(localStorage.getItem('sketcher_'+this.name));\n      this.dx = _settings.dx;\n      this.dy = _settings.dy;\n\n      this.principalx.setPrincipalLength(this.dx);\n      this.principaly.setPrincipalLength(this.dy);\n      this.principalx.selectionDone();\n      this.principaly.selectionDone();\n\n      this.polygonDrawer.updateScaleFactors(this.principalx.scaleFactor, this.principaly.scaleFactor);\n      this.lineDrawer.updateScaleFactors(this.principalx.scaleFactor, this.principaly.scaleFactor);\n\n    } catch(e) {};\n\n\n    \n    // Load background image for canvas\n    this._reloadImage()\n  }\n\n  // ---------------------------------\n  onRightClick(event): void {\n    event.preventDefault();\n\n    switch(this.selectionMode) {\n      case \"line\":\n        var obj = this.lineDrawer.getCurrentActive();\n        this.lineDrawer.add();\n        break;\n\n      case \"polygon\":\n        var obj = this.polygonDrawer.getCurrentActive();\n        this.polygonDrawer.add();\n        break;\n\n      case \"principalx\":\n        var obj = this.principalx;\n        break;\n\n      case \"principaly\":\n        var obj = this.principaly;\n        break;\n    }\n    obj.selectionDone();\n    obj.draw();\n  }\n  // ---------------------------------\n  onLengthChange(): void {\n    this.principalx.setPrincipalLength(this.dx);\n    this.principaly.setPrincipalLength(this.dy);\n    this.principalx.selectionDone();\n    this.principaly.selectionDone();\n    \n    this._store2session();\n\n    this.polygonDrawer.updateScaleFactors(this.principalx.scaleFactor, this.principaly.scaleFactor);\n    this.lineDrawer.updateScaleFactors(this.principalx.scaleFactor, this.principaly.scaleFactor);\n\n    this._reloadImage();\n\n  }\n\n  // ---------------------------------\n  onLeftClick(event): void {\n\n    // Modern browser's now handle this for you. Chrome, IE9, and Firefox\n    // support the offsetX/Y like this, passing in the event from the click handler.\n    // https://stackoverflow.com/questions/55677/how-do-i-get-the-coordinates-of-a-mouse-click-on-a-canvas-element\n\n\n    console.log(this.selectionMode);\n    var x = parseInt(event.offsetX);\n    var y = parseInt(event.offsetY);\n\n    switch(this.selectionMode) {\n      case \"principalx\":\n        this.principalx.addPoint(x, y);\n        this.principalx.draw();\n        break;\n      case \"principaly\":\n        this.principaly.addPoint(x, y);\n        this.principaly.draw();\n        break;\n      case \"polygon\":\n        var polygon = this.polygonDrawer.getCurrentActive();\n        polygon.addPoint(x, y);\n        polygon.draw();\n        break;\n      case \"line\":\n        var line = this.lineDrawer.getCurrentActive();\n        line.addPoint(x, y);\n        line.draw();\n        break;\n    }\n\n  }\n  // ---------------------------------\n  private _reloadImage() {\n\n    this.image.onload = () => {\n      this.ctx.drawImage(this.image,0,0, this.width, this.height);\n\n      this.principalx.draw();\n      this.principaly.draw();\n\n      this.polygonDrawer.objs.forEach(function (polygon, index) {\n        polygon.draw();\n      });\n\n      this.lineDrawer.objs.forEach(function (line, index) {\n        line.draw();\n      });\n\n    }\n    this.image.src = this.imagePath;\n\n\n  }\n  // ---------------------------------\n  remove(): void {\n\n    switch(this.selectionMode) {\n      case \"principalx\":\n        this.principalx.reset();\n        console.log(\"X axis removed!\");\n        break;\n      case \"principaly\":\n        this.principaly.reset();\n        console.log(\"Y axis removed!\");\n        break;\n      case \"polygon\":\n        this.polygonDrawer.remove();\n        console.log(\"Polygon removed!\");\n        break;\n      case \"line\":\n        this.lineDrawer.remove();\n        console.log(\"Line removed!\");\n        break;\n    }\n    this._reloadImage();\n  }\n\n  // -----------------------------\n  private _store2session(){\n    // Store axis to session\n    var _settings = {\n      dx: this.dx,\n      dy: this.dy,\n    }\n    localStorage.setItem('sketcher_'+this.name, JSON.stringify(_settings)); \n  }\n\n\n}\n","\n\n<div class=\"card mb-3\">\n\n  <div class=\"card-body\">\n    <h5 class=\"card-title\">{{ name }}</h5>\n\n    <div class=\"input-group mb-3\">\n      <div class=\"input-group-prepend\">\n        <span class=\"input-group-text\" id=\"selectionType\">Mode</span>\n      </div>\n      <select [(ngModel)]=\"selectionMode\" id=\"typeselection\">\n        <option value=\"principalx\">Principal X</option>\n        <option value=\"principaly\">Principal Y</option>\n        <option value=\"polygon\">Area</option>\n        <option value=\"line\">Length</option>\n      </select>\n\n      <div class=\"input-group-prepend\">\n        <span class=\"input-group-text\" id=\"scalex\">Ref X</span>\n      </div>\n      <input [(ngModel)]=\"dx\" type=\"number\" (change)=\"onLengthChange()\" min=\"0.01\" step=\"0.01\"> \n\n      <div class=\"input-group-prepend\">\n        <span class=\"input-group-text\" id=\"scaley\">Ref Y</span>\n      </div>\n      <input [(ngModel)]=\"dy\" type=\"number\" (change)=\"onLengthChange()\" min=\"0.01\" step=\"0.01\">\n\n      <button class=\"btn btn-danger\" id=\"send-btn\" (click)=\"remove()\">Remove</button>\n\n    </div>\n  </div>\n</div>\n  \n\n\n<canvas \n  [width]=\"width\"\n  [height]=\"height\" #canvas (click)=\"onLeftClick($event)\"\n  (contextmenu)=\"onRightClick($event)\" style=\"cursor: crosshair;\"\n  class=\"center\"\n></canvas>","import { Injectable } from '@angular/core';\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class PolygonService {\n\n  public points = [];\n  public pointsReal = [];\n\n  private initialized: Boolean = false;\n  private done: Boolean = false;\n  private pointSize: number = 5;\n  private color: string;\n  private colorFill: string;\n  public area: number = 0.0;\n  \n  constructor(private ctx: CanvasRenderingContext2D, private ax: number=1.0, private ay:number=1.0){\n    var r =  Math.floor(Math.random() * 255);\n    var g =  Math.floor(Math.random() * 255);\n    var b =  Math.floor(Math.random() * 255);\n    this.color = \"rgb(\"+r+\" ,\"+g+\", \"+b+\")\";\n    this.colorFill = \"rgb(\"+r+\" ,\"+g+\", \"+b+\", 0.4)\";\n  }\n\n  addPoint( x: number, y: number) {\n    this.points.push([x,y]);\n    this.initialized = true;\n  }\n  // -----------------------------\n  draw(){\n\n    if (this.initialized) {\n\n      this.ctx.strokeStyle = this.color;\n      this.ctx.fillStyle = this.color;\n      this.ctx.lineWidth = 3;\n      this.ctx.beginPath();\n      this.ctx.setLineDash([5, 15]);\n      this.ctx.moveTo(this.points[0][0], this.points[0][1]);\n      this.ctx.fillRect(this.points[0][0] , this.points[0][1], this.pointSize, this.pointSize);\n\n      for ( var i=1 ; i < this.points.length ; i+=1 ){\n        this.ctx.lineTo( this.points[i][0] , this.points[i][1] )\n        this.ctx.fillRect(this.points[i][0] , this.points[i][1], this.pointSize, this.pointSize);\n      }\n      this.ctx.stroke();\n\n      if (this.done) {\n        this.ctx.fillStyle = this.colorFill;\n        this.ctx.beginPath();\n        this.ctx.moveTo(this.points[0][0], this.points[0][1]);\n        for ( var i=1 ; i < this.points.length ; i+=1 ){\n          this.ctx.lineTo( this.points[i][0] , this.points[i][1] )\n        }\n        this.ctx.closePath();\n        this.ctx.fill();\n  \n        var mean = this._calcMean();\n        this.ctx.fillStyle = \"rgb(0,0,0)\";\n        this.ctx.font = \"20px Arial\";\n        this.ctx.fillText(this.area.toFixed(2)+\"m2\", mean[0], mean[1]); \n      }\n    } \n\n  } \n  // -----------------------------\n  selectionDone(){\n    this.done = true;\n    this.update();\n  }\n  // -----------------------------\n  reset(){\n    this.initialized = false;\n    this.points = [];\n  }\n  // -----------------------------\n  getVertices(){\n    return this.pointsReal;\n  }\n\n  // -----------------------------\n  setScaleFactors(ax: number, ay:number) {\n    this.ax = ax;\n    this.ay = ay;\n    console.log(ax, ay);\n  }\n  // -----------------------------\n  update() {\n    if (this.done) {\n      this._calcPolygonInRealUnit();\n      this.area = this._calcPolygonArea();\n    }\n  }\n\n  // -----------------------------\n  private _calcPolygonInRealUnit() {\n    this.pointsReal = [];\n    for (var i = 0, l = this.points.length; i < l; i++) {\n      this.pointsReal.push([this.points[i][0]*this.ax, this.points[i][1]*this.ay])\n    }\n  };\n  // -----------------------------\n  private _calcPolygonArea() {\n    var total = 0;\n\n    for (var i = 0, l = this.pointsReal.length; i < l; i++) {\n      var addX = this.pointsReal[i][0];\n      var addY = this.pointsReal[i == this.pointsReal.length - 1 ? 0 : i + 1][1];\n      var subX = this.pointsReal[i == this.pointsReal.length - 1 ? 0 : i + 1][0];\n      var subY = this.pointsReal[i][1];\n\n      total += (addX * addY * 0.5);\n      total -= (subX * subY * 0.5);\n    }\n\n    return Math.abs(total);\n  }\n  // -----------------------------\n  private _calcMean() {\n    var mean = [0.0, 0.0]\n    var npts = this.points.length;\n    this.points.forEach(function (point, index) {\n      mean[0] += point[0]/npts;\n      mean[1] += point[1]/npts;\n    });\n\n    return mean;\n  }\n  // -----------------------------\n\n}\n\n\n\n","import { NgModule } from '@angular/core';\nimport { Routes, RouterModule } from '@angular/router';\n\nconst routes: Routes = [];\n\n@NgModule({\n  imports: [RouterModule.forRoot(routes)],\n  exports: [RouterModule]\n})\nexport class AppRoutingModule { }\n","import { enableProdMode } from '@angular/core';\nimport { platformBrowserDynamic } from '@angular/platform-browser-dynamic';\n\nimport { AppModule } from './app/app.module';\nimport { environment } from './environments/environment';\n\nif (environment.production) {\n  enableProdMode();\n}\n\nplatformBrowserDynamic().bootstrapModule(AppModule)\n  .catch(err => console.error(err));\n","function webpackEmptyAsyncContext(req) {\n\t// Here Promise.resolve().then() is used instead of new Promise() to prevent\n\t// uncaught exception popping up in devtools\n\treturn Promise.resolve().then(function() {\n\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\te.code = 'MODULE_NOT_FOUND';\n\t\tthrow e;\n\t});\n}\nwebpackEmptyAsyncContext.keys = function() { return []; };\nwebpackEmptyAsyncContext.resolve = webpackEmptyAsyncContext;\nmodule.exports = webpackEmptyAsyncContext;\nwebpackEmptyAsyncContext.id = \"zn8P\";"]}